<!DOCTYPE html>
<html>
<head>
	<title>upload2</title>
</head>
<body>

<form id="file-form" action="handler.php" method="POST">
  <input type="file" id="file-select" name="uploadedFiles[]" multiple/>
  <button type="submit" id="upload-button">Upload</button>
</form>
<div id ="demo"></div>
<script>
$(document).ready(function(){

	  var form = document.getElementById('file-form');
    var fileSelect = document.getElementById('file-select');
    var uploadButton = document.getElementById('upload-button');

    form.onsubmit = function(event) {
                       event.preventDefault();

                       // Update button text.
                       uploadButton.innerHTML = 'Uploading...';

                       // Get the selected files from the input.
                       var files = fileSelect.files;
                       // Create a new FormData object.
                       var formData = new FormData();

                       // Loop through each of the selected files.
                    for (var i = 0; i < files.length; i++) {
                                   var file = files[i];

                                   // Check the file type.
                                /*  if (!file.type.match('image.*')) {
                                           continue;
                                   }*/

                                   // Add the file to the request.
                                  formData.append('uploadedFiles[]', file, file.name);
                     }
                     // Set up the request.
                     var xhr = new XMLHttpRequest();

                   /*  xhr.upload.addEventListener('progress', function(e){

                         if (e.lengthComputable){

                             console.log('Bytes Loaded:' + e.loaded);
                             console.log('Total Size: ' + e.total);
                             console.log('Percentage Uploaded: ' + (e.loaded / e.total))

                             var percent = Math.round(e.loaded / e.total * 100);

                            $('#progressBar').attr('aria-valuenow', percent).css('width',percent + '%').text(percent + '%'); 
                       }

                    });*/

                     // Open the connection.
                     xhr.open('POST', 'checker.py', true);
                     
                     // Set up a handler for when the request finishes.
                    xhr.onload = function () {
                                   if (xhr.status === 200 && xhr.readyState == 4) {
                                        // File(s) uploaded.
                                        console.log("will tell you if the request completed successfully");
                                        uploadButton.innerHTML = 'Upload';
                                        document.getElementById("demo").innerHTML = xhr.responseText;
                                    } else {
                                         alert('An error occurred!');
                                    }
                    };
                    // Send the Data.
                    xhr.send(formData);
      }
  });

</script>
</body>
</html>